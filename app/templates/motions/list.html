{% extends "base.html" %}

{% block title %}Moties & Amendementen â€” Verkiezing Vibecheck{% endblock %}

{% block content %}
<h1 class="text-3xl font-bold text-gray-900 mb-6">Moties & Amendementen</h1>

<div class="flex flex-col md:flex-row gap-6">
    {# Filter sidebar #}
    <div class="md:w-64 flex-shrink-0">
        <form hx-get="/moties/" hx-target="#motions-list" hx-swap="innerHTML" hx-push-url="true"
              class="bg-white rounded-lg shadow p-4 space-y-4">
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Zoeken</label>
                <input type="text" name="q" value="{{ filter_q }}"
                       placeholder="Zoek op titel..."
                       class="w-full border rounded px-3 py-1.5 text-sm">
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Type</label>
                <select name="type" class="w-full border rounded px-3 py-1.5 text-sm">
                    <option value="">Alle</option>
                    <option value="Motie" {% if filter_type == 'Motie' %}selected{% endif %}>Motie</option>
                    <option value="Amendement" {% if filter_type == 'Amendement' %}selected{% endif %}>Amendement</option>
                </select>
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Uitslag</label>
                <select name="result" class="w-full border rounded px-3 py-1.5 text-sm">
                    <option value="">Alle</option>
                    <option value="aangenomen" {% if filter_result == 'aangenomen' %}selected{% endif %}>Aangenomen</option>
                    <option value="verworpen" {% if filter_result == 'verworpen' %}selected{% endif %}>Verworpen</option>
                </select>
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Partij</label>
                <select name="party_id" class="w-full border rounded px-3 py-1.5 text-sm">
                    <option value="">Alle partijen</option>
                    {% for party in parties %}
                    <option value="{{ party.id }}" {% if filter_party_id == party.id %}selected{% endif %}>{{ party.abbreviation }}</option>
                    {% endfor %}
                </select>
            </div>
            <button type="submit"
                    class="w-full bg-blue-600 text-white rounded px-4 py-2 text-sm font-medium hover:bg-blue-700 transition">
                Filteren
            </button>
        </form>

        <a href="/moties/statistieken" class="block mt-4 text-center text-sm text-blue-600 hover:underline">
            Bekijk statistieken per partij &rarr;
        </a>
    </div>

    {# Results #}
    <div class="flex-1" id="motions-list">
        {% include "motions/_list_partial.html" %}
    </div>
</div>
{% endblock %}
